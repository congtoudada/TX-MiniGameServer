syntax = "proto2";

import "GamePlayPB.proto";

enum MonsterNetType
{
  Idle = 1;  // 站桩
  Chase = 2;  // 追逐
  Shoot = 3;  // 射击
}

message ReqGenMonster  // 刷怪
{
  required int32 actionId = 1;  // 动作id
  required int32 monsterIdx = 2;  // 怪物配置索引
  required int32 genCount = 3;  // 生成数量
//  required float genDelay = 4;  // 生成延迟
//  required float genInterval = 4;  // 生成间隔
  required NetVector3 genPos = 4;  // 生成位置
  required NetVector3 genRotate = 5;  // 生成旋转
  required int32 genType = 6; // 刷怪触发方式(Debug)
}

message RspGenMonster
{
  required int32 actionId = 1;
  required int32 monsterIdx = 2;
  required int32 genCount = 3;
  required NetVector3 genPos = 4;  // 生成位置
  required NetVector3 genRotate = 5;  // 生成旋转
  required int64 mId = 6; // 怪物id
}

message ReqAttackMonster  // 打怪
{
  required int64 mId = 1; // 怪物id
  required NetVector3 dir = 2;  // 击退方向
  required float dis = 3;  // 击退距离
  required float hp = 4;  // 伤害值
  required float sp = 5;  // 削韧值
  required float duration = 6;  // 受伤持续时间
}

message RspAttackMonster
{
  required int64 mId = 1; // 怪物id
  required NetVector3 dir = 2;  // 击退方向
  required float dis = 3;  // 击退距离
  required float hp = 4;  // 伤害值
  required float sp = 5;  // 削韧值
  required float duration = 6;  // 受伤持续时间
}

message ReqSyncPosMonsterItem
{
  required int64 mId = 1; // 怪物id
  required int64 uId = 2;  // 索敌id
  required NetVector3 pos = 3;  // 怪物位置
  required NetVector3 dir = 4;  // 运动方向
  required float speed = 5;  // 运动速度
}

message ReqSyncPosMonster
{
  repeated ReqSyncPosMonsterItem reqList = 1;
  required int64 timestamp = 2;  // 请求时间戳
}

message RspSyncPosMonsterItem
{
  required int64 mId = 1; // 怪物id
  required int64 uId = 2;
  required NetVector3 targetPos = 3;  // 目标位置
}

message RspSyncPosMonster
{
  repeated RspSyncPosMonsterItem rspList = 1;
  required int64 timestamp = 2;  // 请求时间戳
}

message ReqFindTarget  // 索敌
{
  required int64 mId = 1;
  required MonsterNetType type = 2;
  required NetVector3 pos = 3;
}

message RspFindTarget
{
  required int64 mId = 1;
  required int64 uid = 2;
}

message ReqMonsterDash  // 冲刺
{
  required int64 mId = 1;
  required int64 uId = 2;
  required NetVector3 pos = 3;
  required float dis = 4;
}

message RspMonsterDash
{
  required int64 mId = 1;
  required NetVector3 target = 2;
}